Step 10: Update quiz-game.html Save Function

```javascript
async function saveScore() {
    const percentage = Math.round((score / (questionCount * 100)) * 100);
    const playerName = localStorage.getItem('playerName') || 'Anonymous';
    
    // Save locally
    const localLeaderboard = JSON.parse(localStorage.getItem('fortebetLeaderboard') || '[]');
    localLeaderboard.push({
        name: playerName,
        score: percentage,
        testType: questionCount + 'Q',
        date: new Date().toLocaleDateString(),
        time: new Date().toLocaleTimeString()
    });
    localStorage.setItem('fortebetLeaderboard', JSON.stringify(localLeaderboard.slice(-100)));
    
    // Try to save to Firebase
    if (isOnline()) {
        const saved = await saveLeaderboardScore(playerName, percentage, questionCount + 'Q');
        if (saved) {
            console.log('Leaderboard score saved to cloud');
        }
    } else {
        addToSyncQueue({
            type: 'leaderboard',
            name: playerName,
            score: percentage,
            testType: questionCount + 'Q',
            timestamp: new Date().toISOString()
        });
    }
}
```

Step 11: Update leaderboard.html

```javascript
async function loadLeaderboard(filter = 'all') {
    leaderboardRows.innerHTML = '<div class="no-data"><i class="fas fa-spinner fa-spin"></i> Loading...</div>';
    
    try {
        // Try Firebase first
        let leaderboardData = [];
        
        if (isOnline()) {
            leaderboardData = await loadLeaderboard(20, filter);
        }
        
        // If no Firebase data or offline, use local
        if (leaderboardData.length === 0) {
            const localData = JSON.parse(localStorage.getItem('fortebetLeaderboard') || '[]');
            
            // Apply filter
            let filtered = localData;
            if (filter === '30') {
                filtered = localData.filter(entry => entry.testType === '30Q');
            } else if (filter === '100') {
                filtered = localData.filter(entry => entry.testType === '100Q');
            }
            
            leaderboardData = filtered.slice(0, 20);
        }
        
        // Display data
        if (leaderboardData.length === 0) {
            leaderboardRows.innerHTML = `
                <div class="no-data">
                    <i class="fas fa-chart-line"></i>
                    <p>No scores yet! Be the first.</p>
                </div>
            `;
            return;
        }
        
        leaderboardRows.innerHTML = '';
        leaderboardData.forEach((entry, index) => {
            const row = document.createElement('div');
            row.className = 'table-row';
            row.innerHTML = `
                <div class="rank rank-${index + 1}">${index + 1}</div>
                <div class="player-name">${entry.name}</div>
                <div class="score">${entry.score}%</div>
                <div class="test-type">${entry.testType}</div>
                <div class="date">${entry.date}</div>
            `;
            leaderboardRows.appendChild(row);
        });
        
    } catch (error) {
        console.error('Error loading leaderboard:', error);
        // Fallback to local
        loadFromLocalStorage(filter);
    }
}
```

---

Part 5: Test and Deploy